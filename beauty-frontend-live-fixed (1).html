<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lumina Skin Studio - Reveal Your Radiance</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    html { scroll-behavior:smooth; }
    body { font-family:'Georgia', serif; line-height:1.6; color:#5a4a4a; background:#fefefe; }
    .container { max-width:1200px; margin:0 auto; padding:0 20px; }
    header { position:fixed; top:0; left:0; right:0; background:rgba(255,250,248,0.95); backdrop-filter:blur(10px); z-index:1000; padding:15px 0; border-bottom:1px solid rgba(241,196,196,0.3); transition:all .3s ease; }
    nav { display:flex; justify-content:space-between; align-items:center; }
    .logo { font-size:1.8em; font-weight:bold; color:#d4a574; text-decoration:none; }
    .nav-links { display:flex; list-style:none; gap:30px; }
    .nav-links a { text-decoration:none; color:#5a4a4a; font-weight:500; transition:color .3s ease; position:relative; }
    .nav-links a:hover { color:#d4a574; }
    .nav-links a::after { content:''; position:absolute; bottom:-5px; left:0; width:0; height:2px; background:#d4a574; transition:width .3s ease; }
    .nav-links a:hover::after { width:100%; }
    .hero { height:100vh; background:linear-gradient(rgba(244,223,223,.4), rgba(244,223,223,.4)), url('https://images.unsplash.com/photo-1616394584738-fc6e612e71b9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80') center/cover; display:flex; align-items:center; justify-content:center; text-align:center; color:#5a4a4a; position:relative; }
    .hero-content { max-width:600px; animation:fadeInUp 1s ease-out; }
    .hero h1 { font-size:3.5em; margin-bottom:20px; color:#8b6f47; text-shadow:2px 2px 4px rgba(255,255,255,.8); }
    .hero p { font-size:1.3em; margin-bottom:30px; color:#6b5b5b; line-height:1.8; }
    .cta-button { display:inline-block; background:linear-gradient(135deg,#d4a574,#c19a6b); color:white; padding:18px 40px; border-radius:50px; text-decoration:none; font-weight:600; font-size:1.1em; transition:all .3s ease; box-shadow:0 8px 25px rgba(212,165,116,.3); border:none; cursor:pointer; }
    .cta-button:hover { transform:translateY(-3px); box-shadow:0 12px 35px rgba(212,165,116,.4); background:linear-gradient(135deg,#c19a6b,#b8916a); }
    section { padding:80px 0; }
    .section-title { text-align:center; font-size:2.5em; color:#8b6f47; margin-bottom:20px; position:relative; }
    .section-title::after { content:''; position:absolute; bottom:-10px; left:50%; transform:translateX(-50%); width:60px; height:3px; background:linear-gradient(135deg,#d4a574,#f1c4c4); border-radius:2px; }
    .section-subtitle { text-align:center; font-size:1.2em; color:#6b5b5b; margin-bottom:50px; max-width:600px; margin-left:auto; margin-right:auto; }
    .services { background:linear-gradient(135deg,#fffafa,#fef7f0); }
    .services-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:40px; margin-top:60px; }
    .service-card { background:white; padding:40px 30px; border-radius:20px; text-align:center; box-shadow:0 10px 30px rgba(241,196,196,.2); transition:all .3s ease; border:1px solid rgba(241,196,196,.3); }
    .service-card:hover { transform:translateY(-10px); box-shadow:0 20px 40px rgba(241,196,196,.3); }
    .service-icon { font-size:3.5em; margin-bottom:25px; color:#d4a574; }
    .service-card h3 { font-size:1.5em; color:#8b6f47; margin-bottom:15px; }
    .service-card p { color:#6b5b5b; line-height:1.8; }
    .products { background:linear-gradient(135deg,#fffafa,#fef7f0); }
    .products-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:40px; margin-top:60px; }
    .product-card { background:white; border-radius:20px; overflow:hidden; box-shadow:0 10px 30px rgba(241,196,196,.2); transition:all .3s ease; border:1px solid rgba(241,196,196,.3); }
    .product-card:hover { transform:translateY(-10px); box-shadow:0 20px 40px rgba(241,196,196,.3); }
    .product-image { width:100%; height:250px; background-size:cover; background-position:center; }
    .product-content { padding:30px; }
    .product-card h3 { font-size:1.4em; color:#8b6f47; margin-bottom:15px; }
    .product-card p { color:#6b5b5b; margin-bottom:20px; line-height:1.7; }
    .product-price { font-size:1.5em; font-weight:bold; color:#d4a574; margin-bottom:20px; }
    .buy-button { background:linear-gradient(135deg,#d4a574,#c19a6b); color:white; padding:12px 30px; border-radius:25px; text-decoration:none; font-weight:600; transition:all .3s ease; display:inline-block; border:none; cursor:pointer; }
    .buy-button:hover { transform:translateY(-2px); box-shadow:0 8px 20px rgba(212,165,116,.3); }
    .booking { background:white; }
    .booking-container { max-width:900px; margin:0 auto; }
    footer { background:linear-gradient(135deg,#8b6f47,#6b5845); color:white; padding:60px 0 30px; text-align:center; }
    .footer-content { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:40px; margin-bottom:40px; }
    .footer-section h3 { font-size:1.3em; margin-bottom:20px; color:#f1c4c4; }
    .footer-section p, .footer-section a { color:rgba(255,255,255,.8); text-decoration:none; transition:color .3s ease; }
    .footer-section a:hover { color:#f1c4c4; }
    .social-icons { display:flex; justify-content:center; gap:20px; margin-top:20px; }
    .social-icon { font-size:1.5em; color:rgba(255,255,255,.8); transition:all .3s ease; cursor:pointer; }
    .social-icon:hover { color:#f1c4c4; transform:translateY(-3px); }
    .footer-bottom { border-top:1px solid rgba(255,255,255,.2); padding-top:30px; color:rgba(255,255,255,.6); }
    @keyframes fadeInUp { from { opacity:0; transform:translateY(30px); } to { opacity:1; transform:translateY(0); } }
    .skin-analysis { background:white; }
    .analysis-container { max-width:800px; margin:0 auto; background:linear-gradient(135deg,#fffafa,#fef7f0); padding:50px; border-radius:25px; box-shadow:0 15px 40px rgba(241,196,196,.2); }
    .upload-area { border:3px dashed #d4a574; border-radius:20px; padding:60px 40px; text-align:center; margin-bottom:30px; transition:all .3s ease; background:rgba(255,255,255,.7); cursor:pointer; position:relative; }
    .upload-area.dragover { background:rgba(255,255,255,.9); }
    .upload-icon { font-size:4em; color:#d4a574; margin-bottom:20px; }
    .upload-text { font-size:1.2em; color:#8b6f47; margin-bottom:10px; }
    .analysis-result { margin-top:30px; padding:30px; background:white; border-radius:15px; border-left:5px solid #d4a574; box-shadow:0 10px 25px rgba(241,196,196,.2); display:none; }
    .analysis-result h3 { color:#8b6f47; margin-bottom:15px; font-size:1.3em; }
    .analysis-result p { color:#6b5b5b; line-height:1.8; margin-bottom:15px; }
    #imagePreview img { max-width:300px; max-height:200px; border-radius:10px; margin-bottom:15px; box-shadow:0 4px 12px rgba(0,0,0,.1); }
    @media (max-width:768px) {
      .nav-links { display:none; }
      .hero h1 { font-size:2.5em; }
      .hero p { font-size:1.1em; }
      .section-title { font-size:2em; }
      .analysis-container { padding:30px 20px; }
      .services-grid, .products-grid { grid-template-columns:1fr; }
      .footer-content { grid-template-columns:1fr; text-align:center; }
      section { padding:60px 0; }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <nav class="container">
      <a href="#" class="logo">Lumina Skin Studio</a>
      <ul class="nav-links">
        <li><a href="#home">Home</a></li>
        <li><a href="#services">Services</a></li>
        <li><a href="#products">Products</a></li>
        <li><a href="#ai-analyzer">AI Analyzer</a></li>
        <li><a href="#booking">Book Now</a></li>
      </ul>
    </nav>
  </header>

  <!-- Hero -->
  <section id="home" class="hero">
    <div class="hero-content">
      <h1>Reveal Your Radiance</h1>
      <p>Discover the power of personalized skincare with our advanced treatments and expert care. Transform your skin, transform your confidence.</p>
      <a href="#booking" class="cta-button">Book Your Appointment</a>
    </div>
  </section>

  <!-- Services -->
  <section id="services" class="services">
    <div class="container">
      <h2 class="section-title">Our Signature Treatments</h2>
      <p class="section-subtitle">Experience luxury skincare treatments tailored to your unique needs</p>
      <div class="services-grid">
        <div class="service-card">
          <div class="service-icon">üå∏</div>
          <h3>HydraGlow Facial</h3>
          <p>A deeply hydrating treatment that restores moisture balance and leaves your skin with an irresistible glow. Perfect for dry and dull skin types.</p>
        </div>
        <div class="service-card">
          <div class="service-icon">‚ú®</div>
          <h3>Anti-Aging Radiance</h3>
          <p>Advanced anti-aging treatment combining peptides and vitamin C to reduce fine lines and restore youthful radiance to mature skin.</p>
        </div>
        <div class="service-card">
          <div class="service-icon">üåø</div>
          <h3>Purifying Deep Clean</h3>
          <p>Intensive purifying treatment designed for acne-prone and oily skin. Clears pores and balances oil production for clearer, healthier skin.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Products -->
  <section id="products" class="products">
    <div class="container">
      <h2 class="section-title">Recommended Products</h2>
      <p class="section-subtitle">Professional-grade skincare products for your daily routine</p>
      <div class="products-grid">
        <div class="product-card">
          <div class="product-image" style="background-image:url('https://images.unsplash.com/photo-1596755389378-c31d21fd1273?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80');"></div>
          <div class="product-content">
            <h3>Vitamin C Brightening Serum</h3>
            <p>A powerful antioxidant serum that brightens skin tone and reduces dark spots while protecting against environmental damage.</p>
            <div class="product-price">$85</div>
            <button class="buy-button" onclick="alert('Product added to cart! (Demo)')">Buy Now</button>
          </div>
        </div>
        <div class="product-card">
          <div class="product-image" style="background-image:url('https://images.unsplash.com/photo-1620916566398-39f1143ab7be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80');"></div>
          <div class="product-content">
            <h3>Hyaluronic Acid Moisturizer</h3>
            <p>Ultra-hydrating cream with multiple forms of hyaluronic acid to plump and moisturize all skin types for lasting comfort.</p>
            <div class="product-price">$68</div>
            <button class="buy-button" onclick="alert('Product added to cart! (Demo)')">Buy Now</button>
          </div>
        </div>
        <div class="product-card">
          <div class="product-image" style="background-image:url('https://images.unsplash.com/photo-1571781926291-c477ebfd024b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80');"></div>
          <div class="product-content">
            <h3>Gentle Exfoliating Cleanser</h3>
            <p>A mild yet effective cleanser with natural enzymes that gently removes impurities while maintaining your skin's natural barrier.</p>
            <div class="product-price">$45</div>
            <button class="buy-button" onclick="alert('Product added to cart! (Demo)')">Buy Now</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- AI Analyzer -->
  <section id="ai-analyzer" class="skin-analysis">
    <div class="container">
      <h2 class="section-title">üß† AI Skin Analyzer</h2>
      <p class="section-subtitle">Upload your skin photo and get personalized skincare recommendations</p>
      <div class="analysis-container">
        <div class="upload-area" id="uploadArea">
          <input type="file" id="fileInput" accept="image/*" style="display:none">
          <div class="upload-icon">üì∑</div>
          <div class="upload-text">Click here to upload image or drag & drop</div>
        </div>

        <div id="imagePreview"></div>

        <div style="text-align:center; margin:20px 0;">
          <button class="cta-button" id="fallbackAnalyzeBtn">üî¨ Analyze</button>
        </div>

        <div id="resultBox" class="analysis-result">
          <h3 id="resultTitle">üß¥ Skincare Recommendations</h3>
          <p id="resultDescription">Upload an image and click analyze to get personalized advice.</p>
          <p><strong>Suggested Treatment:</strong> <span id="recommendedTreatment">‚Äî</span></p>
        </div>
      </div>
    </div>
  </section>

  <!-- Booking -->
  <section id="booking" class="booking">
    <div class="container">
      <h2 class="section-title">Book Your Appointment</h2>
      <p class="section-subtitle">Ready to transform your skin? Schedule your consultation today</p>
      <div class="booking-container">
        <iframe
          src="https://api.leadconnectorhq.com/widget/booking/kd0NBH94ldYbz5HKEupm"
          style="width:100%; height:700px; border:none; overflow:hidden;"
          scrolling="no"
          allow="geolocation; microphone; camera"
          loading="lazy"
          id="7q90b5icVaJBa49BrH7U_1754187814284">
        </iframe>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Lumina Skin Studio</h3>
          <p>Transforming skin with science and luxury since 2020. Your journey to radiant skin starts here.</p>
          <div class="social-icons">
            <span class="social-icon">üìò</span>
            <span class="social-icon">üì∑</span>
            <span class="social-icon">üê¶</span>
            <span class="social-icon">üìå</span>
          </div>
        </div>
        <div class="footer-section">
          <h3>Contact Info</h3>
          <p>üìç 123 Beauty Lane, Skincare City</p>
          <p>üìû (555) 123-4567</p>
          <p>‚úâÔ∏è hello@luminaskin.com</p>
        </div>
        <div class="footer-section">
          <h3>Hours</h3>
          <p>Monday - Friday: 9AM - 7PM</p>
          <p>Saturday: 10AM - 6PM</p>
          <p>Sunday: 11AM - 5PM</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 Lumina Skin Studio. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // globals
    window.uploadedImage = null;

    // expose functions early (in case)
    window.analyzeWithClaudeAI = analyzeWithClaudeAI;
    window.handleImageUpload = handleImageUpload;

    document.addEventListener('DOMContentLoaded', () => {
      console.log('‚úÖ Lumina Skin Studio loaded with Claude AI integration');
      setupDragAndDrop();
      checkServerStatus();

      // fallback analyze button (if user hasn't used dynamic one)
      document.getElementById('fallbackAnalyzeBtn').addEventListener('click', analyzeWithClaudeAI);
    });

    // server status ping
    async function checkServerStatus() {
      try {
        await fetch('https://beauty-backend.onrender.com/analyze', { method: 'OPTIONS' });
        updateServerStatus('connected', 'üü¢ Claude AI Connected');
      } catch (e) {
        updateServerStatus('demo', 'üü° Demo Mode (Start server: node server.js)');
      }
    }

    function updateServerStatus(status, message) {
      const existing = document.getElementById('serverStatus');
      if (existing) existing.remove();
      const el = document.createElement('div');
      el.id = 'serverStatus';
      el.style.cssText = `
        position:fixed;
        top:70px;
        right:20px;
        background:white;
        padding:10px 15px;
        border-radius:8px;
        box-shadow:0 4px 12px rgba(0,0,0,0.1);
        font-size:.9em;
        z-index:999;
      `;
      el.textContent = message;
      document.body.appendChild(el);
      setTimeout(() => {
        const existing2 = document.getElementById('serverStatus');
        if (existing2) existing2.remove();
      }, 5000);
    }

    // drag/drop & click wiring
    function setupDragAndDrop() {
      const uploadArea = document.getElementById('uploadArea');
      const fileInput = document.getElementById('fileInput');

      if (!uploadArea || !fileInput) return;

      uploadArea.addEventListener('click', () => fileInput.click());

      uploadArea.addEventListener('dragover', e => {
        e.preventDefault();
        uploadArea.classList.add('dragover');
      });
      uploadArea.addEventListener('dragleave', e => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
      });
      uploadArea.addEventListener('drop', e => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        const files = e.dataTransfer.files;
        if (files.length && files[0].type.startsWith('image/')) {
          fileInput.files = files;
          handleImageUpload({ target: { files } });
        }
      });

      fileInput.addEventListener('change', handleImageUpload);
    }

    // upload handler (global)
    function handleImageUpload(event) {
      const file = event.target.files[0];
      if (!file || !file.type.startsWith('image/')) {
        alert('Please upload a valid image file');
        return;
      }
      window.uploadedImage = file;

      const reader = new FileReader();
      reader.onload = function(e) {
        const uploadArea = document.getElementById('uploadArea');
        uploadArea.innerHTML = `
          <img src="${e.target.result}" style="max-width:300px; max-height:200px; border-radius:10px; margin-bottom:15px; box-shadow:0 4px 12px rgba(0,0,0,.1);">
          <div style="color:#d4a574; font-size:1.2em; margin-bottom:10px;">‚úÖ Image Ready for Analysis</div>
          <div style="color:#6b5b5b; margin-bottom:15px;">${file.name}</div>
          <button class="cta-button" id="analyzeBtn" style="padding:12px 25px;">
            ü§ñ Analyze with Claude AI
          </button>
        `;
        document.getElementById('analyzeBtn').addEventListener('click', analyzeWithClaudeAI);
      };
      reader.readAsDataURL(file);
    }

    // base64 helper
    function convertImageToBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = e => {
          let b = e.target.result;
          if (b.startsWith('data:')) b = b.split(',')[1];
          resolve(b);
        };
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    // analyze with backend/Claude
    async function analyzeWithClaudeAI() {
      if (!window.uploadedImage) {
        alert('Please upload an image first');
        return;
      }

      const resultBox = document.getElementById('resultBox');
      const titleEl = document.getElementById('resultTitle');
      const descEl = document.getElementById('resultDescription');
      const treatmentEl = document.getElementById('recommendedTreatment');

      resultBox.style.display = 'block';
      titleEl.textContent = 'ü§ñ Analyzing...';
      descEl.textContent = 'Please wait while analysis runs...';
      treatmentEl.textContent = '‚Äî';

      try {
        const base64Image = await convertImageToBase64(window.uploadedImage);
        const resp = await fetch('https://beauty-backend.onrender.com/analyze', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ image: base64Image })
        });
        if (!resp.ok) throw new Error(`Server ${resp.status}`);
        const data = await resp.json();

        titleEl.textContent = 'ü§ñ Analysis Complete ‚ú®';
        descEl.textContent = data.reply || 'No reply text';
        treatmentEl.textContent = data.treatment || '‚Äî';
        resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      } catch (err) {
        console.error('Analysis error:', err);
        titleEl.textContent = 'Connection Error - Demo Mode';
        descEl.innerHTML = `
          <strong>Could not connect to backend:</strong> ${err.message}<br><br>
          <em>Falling back to demo suggestion.</em>
        `;
        treatmentEl.textContent = 'HydraGlow Facial (Demo)';
        setTimeout(() => {
          showDemoAnalysis();
        }, 1000);
      }
    }

    function showDemoAnalysis() {
      const titleEl = document.getElementById('resultTitle');
      const descEl = document.getElementById('resultDescription');
      const treatmentEl = document.getElementById('recommendedTreatment');
      titleEl.textContent = 'üéØ Demo Analysis Complete';
      descEl.innerHTML = `
        <strong>Demo Summary:</strong><br>
        Skin appears slightly dry with mild redness. Recommend hydrating and calming treatment.
      `;
      treatmentEl.textContent = 'HydraGlow Facial (Demo)';
    }

    // anchor smooth scroll fallback
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });
  </script>
</body>
</html>
